seml:
  executable: /home/icb/alessandro.palma/imCPA/compert/train.py
  name: seml_sweep_try
  output_dir: /home/icb/alessandro.palma/results
  conda_environment: imgCPA
  project_root_dir: /home/icb/alessandro.palma/imCPA

slurm:
  max_simultaneous_jobs: 10
  experiments_per_job: 1
  sbatch_options_template: GPU
  sbatch_options:
    gres: gpu:1       # num GPUs
    mem: 90G          # memory
    cpus-per-task: 6  # num cores
    time: 2-00:00     # max time, D-HH:MM

########## HUPERPARAMETER TUNING ##########

fixed:
  path.experiment_name: trial_experiment_seml
  path.image_data: /home/icb/alessandro.palma/data/cellpainting_100
  path.data_index_path: /home/icb/alessandro.palma/data/data_index/integrated/200k
  path.embeddings_path: /home/icb/alessandro.palma/data/metadata_processed/original/embeddings/rdkit/rdkit2D_embedding_cellpainting.csv
  path.use_embeddings: True
  path.result_path: /home/icb/alessandro.palma/results/trial_experiment_seml

  resume.resume: False
  resume.resume_checkpoint: ""
  resume.resume_epoch: 1

  training_params.img_plot: True
  training_params.save_results: True 
  training_params.num_epochs: 30
  training_params.batch_size: 256
  training_params.eval: True   
  training_params.eval_every: 1
  training_params.n_workers_loader: 4 
  training_params.generate: False
  training_params.model_name: AE
  training_params.temperature: 0.8
  training_params.augment_train: True
  training_params.patience: 30
  training_params.seed: 42
  training_params.predict_n_cells: False
  training_params.append_layer_width: null

  image_params.in_width: 100
  image_params.in_height: 100
  image_params.in_channels: 5

  model.hparams.latent_dim: 256
  model.hparams.init_fm: 64
  n_conv: 3
  n_residual_blocks: 8
  adversary_width: 512
  adversary_depth: 3
  reg_adversary: 10000
  penalty_adversary: 3
  autoencoder_lr: 1e-4
  adversary_lr: 1e-3
  autoencoder_wd: 1e-6
  adversary_wd: 1e-4
  adversary_steps: 50 
  batch_size: 10
  step_size_lr: 512
  embedding_encoder_width: 512 
  embedding_encoder_depth: 1
  warmup_steps: 1
  data_driven_sigma: True
  ae_pretrain: True
  

grid:
  ae_pretrain_steps: 
    type: choice 
    options:
      - 0
      - 3
      - 5
  


